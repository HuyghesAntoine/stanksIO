<!DOCTYPE html>
<html>

<head>
  <title>Controls</title>
  <meta name="viewport" content="width=device-width, user-scalable=no"/>
  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"/>
  <link rel="stylesheet" href="/stylesheets/landscape.css" type="text/css" media="screen and (orientation: landscape)">
  <link rel="stylesheet" href="/stylesheets/portrait.css" type="text/css" media="screen and (orientation: portrait)">
  <!-- JavaScripts -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script src="../javascript/joy.js"></script>
</head>

<body id="controlPage">
<div id="pseudal_page">
  <label for="name">Pseudo</label>
  <input  type="text" id="Pseudal">
  <button id="btnPseudo" onclick="displayte()">Valider</button>
</div>


<div id="control_pading">
  <div class="row">
  <div class="progress" id="lifeBar">
    <div id="lifeValue" class="progress-bar bg-danger progress-bar-striped" role="progressbar" style="width: 100%" aria-valuenow="100"
      aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>

<div class="row">
  <div class="progress" id="expBar">
    <div id="expValue" class="progress-bar bg-success progress-bar-striped" role="progressbar" style="width: 00%" aria-valuenow="100"
      aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>

  <p class="text-center" id="level">Level: 1</p>
    <button id="changeP" class="btn btn-outline-info" data-toggle="modal" data-target="#pseudoModal"> Name </button>
  <div id="scoreDiv" class="row justify-content-center">
    Score : &nbsp <span id="score"> 0 </span>
  </div>
 
  <div id="upgrades" class="row">
    <div class="col-md-3">
        <button class="btn btn-outline-dark btnUpgr" id="attackUpgrade"> ATTACK UP </button>
    </div>
    <div class="col-md-3">
        <button class="btn btn-outline-dark btnUpgr" id="speedUpgrade"> SPEED UP </button>
    </div>
    <div class="col-md-3">
        <button class="btn btn-outline-dark btnUpgr" id="sizeUpgrade"> SIZE UP </button>
    </div>
    <div class="col-md-3">
        <button class="btn btn-outline-dark btnUpgr" id="attackSpeedUpgrade"> ATTACK SPEED UP </button>
    </div>
  </div>
 </div>
 <div id="hide_joy">
  <div id="joyMove" >  </div>
  <div id="joyShoot">  </div>
 </div>
  <!-- Modal -->
  <div class="modal fade" id="pseudoModal" tabindex="-1" role="dialog" aria-labelledby="pseudoModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <input autocomplete="off" class="form-control" type="text" id="Pseudo" onkeyup="changerP()">
          <button type="button" class="btn btn-outline-dark" data-dismiss="modal">
            Change
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScripts -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  <script src="../javascript/joy.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="../javascript/ControlsSocket.js"></script>
  <script src="../javascript/ControlsEvents.js"></script>
  <script>
    
    var joyMove = new JoyStick('joyMove',  {
      internalFillColor: '#4D221E',
      internalLineWidth: 1,
      internalStrokeColor: '#4D221E',
      externalLineWidth: 1,
      externalStrokeColor: '#000000',
      autoReturnToCenter: true
    });
    
    var joyShoot = new JoyStick('joyShoot', {
      internalFillColor: '#4D221E',
      internalLineWidth: 1,
      internalStrokeColor: '#4D221E',
      externalLineWidth: 1,
      externalStrokeColor: '#000000',
      autoReturnToCenter: true
    });

    function displayte(){
      var x = document.getElementById("Pseudal").value;
      document.getElementById("pseudal_page").style.display = "none";
      document.getElementById("control_pading").style.display = "block";
      document.getElementById("hide_joy").style.visibility = "visible";
      const socket = new ControlsSocket();
      const events = new ControlsEvents(socket);

    events.onSubPseudo(event, x);
    }
  </script>


</body>

</html>
